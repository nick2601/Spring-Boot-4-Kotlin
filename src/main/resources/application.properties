# ============================================================
# APPLICATION CONFIGURATION
# Spring Boot REST API - Learning Project
# ============================================================

spring.application.name=learning_spring_rest_api

# ------------------------------------------------------------
# SERVER CONFIGURATION
# ------------------------------------------------------------
server.port=8080
spring.web.error.include-message=always
spring.web.error.include-binding-errors=always

# ------------------------------------------------------------
# DATABASE CONFIGURATION (MariaDB)
# ------------------------------------------------------------
spring.datasource.url=jdbc:mariadb://localhost:3306/clean_db
spring.datasource.username=cleanuser
spring.datasource.password=cleanpass
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# Connection Pool (HikariCP - default in Spring Boot)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000

# ------------------------------------------------------------
# JPA / HIBERNATE CONFIGURATION
# ------------------------------------------------------------
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.open-in-view=false
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect

# ------------------------------------------------------------
# FLYWAY MIGRATION CONFIGURATION
# ------------------------------------------------------------
spring.flyway.enabled=true
spring.flyway.locations=classpath:migrations
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# ------------------------------------------------------------
# SECURITY / JWT CONFIGURATION
# ------------------------------------------------------------
# Generate new secret: openssl rand -base64 64
# IMPORTANT: Change this secret before deploying to production!
# Consider using environment variables: ${JWT_SECRET}
jwt.secret=8cbe5a7659f27a227dec9cf087273f36ce449b8e45ee261cf4c59ea14d36039c

# Token issuer identifier
jwt.issuer=learning-spring-rest-api

# Access Token: Short-lived token for API requests (default: 15 minutes = 900000ms)
jwt.access-token.expiration=900000
jwt.access-token.name=access

# Refresh Token: Long-lived token for getting new access tokens (default: 7 days = 604800000ms)
jwt.refresh-token.expiration=604800000
jwt.refresh-token.name=refresh

# Auto-refresh: Automatically refresh access token when approaching expiry
jwt.auto-refresh.enabled=true
# Threshold: Refresh token if it expires in less than 5 minutes (300000ms)
jwt.auto-refresh.threshold=300000

# ------------------------------------------------------------
# ACTUATOR / MONITORING
# ------------------------------------------------------------
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ------------------------------------------------------------
# LOGGING CONFIGURATION
# ------------------------------------------------------------
logging.level.root=INFO
logging.level.com.example.nikhil=DEBUG
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ------------------------------------------------------------
# SWAGGER / OPENAPI CONFIGURATION
# ------------------------------------------------------------
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.disable-swagger-default-url=true

# ------------------------------------------------------------
# APACHE KAFKA CONFIGURATION
# ------------------------------------------------------------
# Set to true when Kafka is running
spring.kafka.enabled=false
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.group-id=spring-boot-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer

# Kafka Topics
app.kafka.topics.user-events=user-events
app.kafka.topics.order-events=order-events
app.kafka.topics.notification-events=notification-events

# ------------------------------------------------------------
# STRIPE PAYMENT CONFIGURATION
# ------------------------------------------------------------
# Get your keys from https://dashboard.stripe.com/apikeys
stripe.api.key=sk_test_your_stripe_secret_key_here
stripe.webhook.secret=whsec_your_webhook_secret_here
stripe.success.url=http://localhost:8080/payment/success
stripe.cancel.url=http://localhost:8080/payment/cancel

